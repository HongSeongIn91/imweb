(주)핌즈 재직 당시 고객사가 입점한 다수의 판매처로부터 주문정보를 수집하여 주문상태를 연동하는 이지오토라는 응용프로그램을 전담했을 때의 경험을 말씀드리겠습니다. 

이지오토는 카페24, 고도몰, 쿠팡 등(A)의 타 서비스와 외부API를 통해 데이터를 송수신합니다. API를 이용한 배송중처리 작업에서 데이터 송수신이 정상적으로 이뤄지지 않을 경우 타 서비스에 주문의 송장 및 택배사 정보가 정상적으로 전송되지 않아 타 서비스 내의 주문상태가 배송중 이전 상태로 남아있게 되고 이는 배송지연으로 인한 주문취소의 가능성을 높입니다. API통신에서 발생하는 서비스 장애는 잘못된 요청을 반복함으로 인해 타 서비스의 API에서 운영 중인 서비스의 해당 요청을 일정시간 동안 제한하여 송수신 자체가 불가능해지는 경우가 있습니다. 이는 예상치 못한 문제로 발생하는 송수신 상의 단기적인 문제를 어느 수준에서부터 이지오토 내에서 문제로 인식하여 적절한 조치를 통해 장기적인 장애 상태로 진행되지 않도록 배송중처리 작업을 설계할 것인가에 대한 문제입니다.

1. 배송중 처리를 위한 별도의 테이블이 생성되고 API작업대상 주문들이 insert 됩니다.
2. 각 주문에 대해 API요청을 송수신하고 각 주문의 실패 횟수를 테이블에 기록합니다.
3. 다음 배송중 처리 작업이 시작될 때 실패 횟수가 3회 이상인 주문은 작업대상에 예외로 처리하여 포함시키지 않습니다.
4. 실패 횟수가 3회 이상인 주문은 View단을 통해 사용자에게 별도로 노출됩니다.

이지오토는 송수신 상의 단기적인 문제를 실패 횟수 3회에서부터 문제로 인식하여 별도의 예외처리를 진행합니다. 이외에 가능한 가능한 적절한 조치는 최근 실패 횟수 업데이트 시각을 확인하고 지정된 예외 처리 시간을 설정한 후 예외 처리 시간을 경과한 주문은 다시 배송중 처리 작업의 대상에 포함되도록 하는 방법이 있습니다.